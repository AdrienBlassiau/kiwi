import React, { useState, useEffect } from 'react';
import LoadLine from './LoadLine';

const DownLoadManager = (props) => {
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  ////////////////////////////  DATA AND FUNCTIONS  ///////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////

  const callQueue = props.callQueue;
  const setCallQueue = props.setCallQueue;
  const solvedQueue = props.solvedQueue;
  const setSolvedQueue = props.setSolvedQueue;
  const cache = props.cache;
  const cacheData = cache.cacheData;

  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////  HANDLING EVENTS  /////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////

  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////  COMPONENTS  ///////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////

  const loadContainer = callQueue
    ? callQueue.map((movie, key) => (
        <LoadLine
          key={key}
          movie={movie}
          loadInfos={cacheData[movie.id]}
          solvedQueue={solvedQueue}
          cache={cache}
          type="load"
        />
      ))
    : null;

  const solvedContainer = solvedQueue
    ? solvedQueue.map((movie, key) => (
        <LoadLine
          key={key}
          movie={movie}
          loadInfos={cacheData[movie.id]}
          solvedQueue={solvedQueue}
          cache={cache}
          type="solved"
        />
      ))
    : null;

  return (
    <div className="download-movies-list">
      <div className="load-container">
        {solvedContainer}
        {loadContainer}
      </div>
    </div>
  );
};

export default DownLoadManager;
