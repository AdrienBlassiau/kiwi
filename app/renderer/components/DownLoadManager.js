import React, { useState, useEffect } from 'react';
import styled, { css } from 'styled-components';

import LoadLine from './LoadLine';

const DownLoadManager = (props) => {
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  ////////////////////////////  DATA AND FUNCTIONS  ///////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////

  const callQueue = props.callQueue;
  const setCallQueue = props.setCallQueue;
  const solvedQueue = props.solvedQueue;
  const setSolvedQueue = props.setSolvedQueue;
  const cache = props.cache;
  const cacheData = cache.cacheData;

  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////  COMPONENTS  ///////////////////////////////
  /////////////////////////////////////////////////////////////////////////////
  /////////////////////////////////////////////////////////////////////////////

  const loadContainer = callQueue
    ? callQueue.map((movie, key) => (
        <LoadLine
          key={key}
          movie={movie}
          loadInfos={cacheData[movie.id]}
          solvedQueue={solvedQueue}
          cache={cache}
          type="load"
        />
      ))
    : null;

  const solvedContainer = solvedQueue
    ? solvedQueue.map((movie, key) => (
        <LoadLine
          key={key}
          movie={movie}
          loadInfos={cacheData[movie.id]}
          solvedQueue={solvedQueue}
          cache={cache}
          type="solved"
        />
      ))
    : null;

  return (
    <DownloadMoviesList>
      <DownloadContainer>
        {solvedContainer}
        {loadContainer}
      </DownloadContainer>
    </DownloadMoviesList>
  );
};

/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
//////////////////////////////////  STYLES  /////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////

const DownloadMoviesList = styled.div`
  display: flex;
  flex-wrap: wrap;
  margin: 30px 10px;
  width: 1600px;
  height: fit-content;
`;

const DownloadContainer = styled.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`;

export default DownLoadManager;
